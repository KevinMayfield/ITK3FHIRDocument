<div>
    <div th:if="${#lists.isEmpty(questionnaireResponses)}">
        <p>None Recorded</p>
    </div>
    <span th:if="${not #lists.isEmpty(questionnaireResponses)}">
        <span>

            <span th:each="questionnaireResponse : ${questionnaireResponses}">

                <table>
                    <thead>
                        <tr>
                            <th>Text</th>
                            <th>Answer</th>
                        </tr>
                    </thead>
                    <tbody>

                        <span th:each="item : ${questionnaireResponse.getItem()}">
                            <tr th:if="${item.hasAnswer()}">
                                <div th:if="${item.hasText()}">
                                    <td th:text="${item.getText()}">Unknown</td>
                                </div>
                                <div th:if="${!item.hasText()}">
                                    <td ></td>
                                </div>
                                <td>
                                    <span th:each="answer : ${item.getAnswer()}">
                                        <span th:if="${answer.hasValueStringType()}">
                                            <div th:text="${answer.getValueStringType().getValue()}">Uknown</div>
                                        </span>
                                        <span th:if="${answer.hasValueCoding()}">
                                            <div th:text="${answer.getValueCoding().getDisplay()}">Uknown</div>
                                        </span>
                                        <span th:if="${answer.hasValueDateType()}">
                                            <div th:text="${#dates.format(answer.getValueDateType().getValue(),'dd MMM YYYY')}">Unknown</div>
                                        </span>
                                    </span>
                                </td>
                            </tr>
                            <tr th:each="subitem : ${item.getItem()}">
                                <div th:if="${subitem.hasText()}">
                                    <td th:text="${subitem.getText()}">Unknown</td>
                                </div>
                                <div th:if="${!subitem.hasText()}">
                                    <td ></td>
                                </div>
                                <td>
                                    <span th:each="answer : ${subitem.getAnswer()}">
                                        <span th:if="${answer.hasValueStringType()}">
                                            <div th:text="${answer.getValueStringType().getValue()}">Uknown</div>
                                        </span>
                                        <span th:if="${answer.hasValueCoding()}">
                                            <div th:text="${answer.getValueCoding().getDisplay()}">Uknown</div>
                                        </span>
                                        <span th:if="${answer.hasValueDateType()}">
                                            <div th:text="${#dates.format(answer.getValueDateType().getValue(),'dd MMM YYYY')}">Unknown</div>
                                        </span>
                                    </span>
                                </td>
                            </tr>
                        </span>
                    </tbody>
                </table>
            </span>
        </span>
    </span>
</div>
